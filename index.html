<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kendrick Lamar Parallax Landing</title>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Doto:wght@100..900&family=Fredericka+the+Great&family=Meie+Script&family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  height: 400vh;
  background: #010100;
  overflow-x: hidden;
  font-family: 'EB Garamond', serif;
  color: white;
}

/* Parallax container */
.parallax-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.element { position: absolute; transition: transform 0.2s ease-out; }
.element img { width: 600px; }
.element-text {
  color: hsl(0,0%,10%);
  font-size: 48px;
  font-weight: bold;
  text-transform: lowercase;
}

/* Scroll-triggered text */
.scroll-text-container {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, 40px);
  display: flex;
  gap: 20px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.4s ease-out, transform 0.4s ease-out;
}

.scroll-word {
  font-size: 22px;
  font-weight: bold;
  color: white;
  opacity: 0;
  transition: opacity 0.4s ease-out;
}

.love-wrapper { display: inline-block; width: 6ch; text-align: center; }
.love { display: inline-block; line-height: 1.4; }

@keyframes fontCycle {
  0%   { font-family: 'EB Garamond', serif; }
  20%  { font-family: 'Doto', sans-serif; }
  40%  { font-family: 'Fredericka the Great', serif; }
  60%  { font-family: 'Arial', cursive; }
  80%  { font-family: 'Times New Roman', serif; }
  100% { font-family: 'EB Garamond', serif; }
}

.scroll-word.love.animate-font {
  animation: fontCycle 2.5s infinite linear;
}

/* Noise overlay */
.noise-overlay { position: fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; opacity:0.15; z-index:9999; }

/* Paragraph */
#paragraphContainer {
  position: fixed;
  left: 50%;
  top: 70%;            /* lower third */
  transform: translate(-50%, 40px);
  max-width: 700px;
  font-size: 18px;
  line-height: 1.6;
  opacity: 0;
  transition: opacity 0.4s ease-out, transform 0.4s ease-out;
  white-space: pre-wrap;
}
.decrypted-char { display: inline-block; white-space: pre; }
</style>
</head>
<body>

<!-- Parallax images -->
<div class="parallax-container">
  <div class="element" style="top:20%; left:33%;" id="elem2"><img src="magazine.webp" alt="magazine"></div>
  <div class="element" style="top:5%; left:50%;" id="elem4"><img src="cacao.webp" alt="cacao"></div>
  <div class="element" style="top:45%; left:20%;" id="elem1"><img src="Nik Muvit.webp" alt="muvit"></div>
  <div class="element" style="top:-7%; left:24%;" id="elem5"><img src="nik barcelona.webp" alt="barcelona"></div>
  <div class="element" style="top:20%; left:12%;" id="elem6"><img src="liza.webp" alt="liza"></div>
  <div class="element" style="top:48%; left:38%;" id="elem7"><img src="kolo.webp" alt="kolo"></div>
  <div class="element" style="top:30%; left:53%;" id="elem8"><img src="lips.webp" alt="love in plane sight"></div>
  <div class="element" style="top:-20%; left:40%;" id="elem9"><img src="eve.webp" alt="eve"></div>
  <div class="element element-text" style="top:45%; left:43%;" id="elem3">nik kranjec</div>
</div>

<!-- Scroll-triggered text -->
<div class="scroll-text-container" id="scrollText">
  <span class="scroll-word" id="word1">reincarnated</span>
  <span class="scroll-word" id="word2">with</span>
  <span class="love-wrapper"><span class="scroll-word love" id="word3">Love</span></span>
</div>

<!-- Paragraph -->
<div id="paragraphContainer">
  <span id="decryptedText">
    A space where curiosity and creation meet. Here, we explore what it means to reconnect with oneself, with others, with the world. Through workshops, personal projects, and shared expressions, I invite experiences that awaken creativity, presence, and joy. What you see here is only the beginning. More will unfold as these explorations take shape.
  </span>
</div>

<!-- Noise overlay -->
<canvas class="noise-overlay" id="noiseCanvas"></canvas>

<script>
/* ------------------ Parallax scrolling ------------------ */
const elements = [
  {el: document.getElementById('elem1'), speed: 0.5},
  {el: document.getElementById('elem2'), speed: 0.35},
  {el: document.getElementById('elem3'), speed: 0.3},
  {el: document.getElementById('elem4'), speed: 0.45},
  {el: document.getElementById('elem5'), speed: 0.2},
  {el: document.getElementById('elem6'), speed: 0.38},
  {el: document.getElementById('elem7'), speed: 0.5},
  {el: document.getElementById('elem8'), speed: 0.35},
  {el: document.getElementById('elem9'), speed: 0.34},
];
window.addEventListener('scroll', ()=>{
  const scrollY = window.scrollY;
  elements.forEach(({el,speed})=>{
    const scale = Math.max(0.5,1-scrollY*0.0005);
    const translateY=-scrollY*speed;
    el.style.transform=`translateY(${translateY}px) scale(${scale})`;
  });
});

/* ------------------ Scroll-triggered "reincarnated" text ------------------ */
const scrollText = document.getElementById("scrollText");
const words = [document.getElementById("word1"),document.getElementById("word2"),document.getElementById("word3")];

const appearStart=500,appearEnd=800,disappearStart=1500,disappearEnd=1800,moveDistance=40;
window.addEventListener("scroll", ()=>{
  const scrollY = window.scrollY;
  if(scrollY<appearStart){
    scrollText.style.opacity=0;
    scrollText.style.transform=`translate(-50%,${moveDistance}px)`;
    words.forEach(w=>{w.style.opacity=0; w.classList.remove("animate-font");});
  } else if(scrollY>=appearStart && scrollY<=appearEnd){
    const progress=(scrollY-appearStart)/(appearEnd-appearStart);
    scrollText.style.opacity=progress;
    scrollText.style.transform=`translate(-50%,${moveDistance*(1-progress)}px)`;
    words.forEach(w=>{w.style.opacity=progress; if(w.id==="word3") w.classList.add("animate-font");});
  } else if(scrollY>appearEnd && scrollY<disappearStart){
    scrollText.style.opacity=1;
    scrollText.style.transform="translate(-50%,0)";
    words.forEach(w=>{w.style.opacity=1; if(w.id==="word3") w.classList.add("animate-font");});
  } else if(scrollY>=disappearStart && scrollY<=disappearEnd){
    const progress=1-(scrollY-disappearStart)/(disappearEnd-disappearStart);
    scrollText.style.opacity=progress;
    scrollText.style.transform=`translate(-50%,${-moveDistance*(1-progress)}px)`;
    words.forEach(w=>{w.style.opacity=progress;});
  } else{
    scrollText.style.opacity=0;
    scrollText.style.transform=`translate(-50%,${-moveDistance}px)`;
    words.forEach(w=>{w.style.opacity=0; w.classList.remove("animate-font");});
  }
});

/* ------------------ Noise overlay ------------------ */
const canvas=document.getElementById('noiseCanvas'); 
const ctx=canvas.getContext('2d');
function resizeCanvas(){canvas.width=window.innerWidth; canvas.height=window.innerHeight;}
window.addEventListener('resize',resizeCanvas);
resizeCanvas();
function generateNoise(){
  const imageData=ctx.createImageData(canvas.width,canvas.height);
  const buffer=new Uint32Array(imageData.data.buffer);
  for(let i=0;i<buffer.length;i++){
    const val=Math.random()*255|0;
    buffer[i]=(255<<24)|(val<<16)|(val<<8)|val;
  }
  ctx.putImageData(imageData,0,0);
}
function loopNoise(){generateNoise(); requestAnimationFrame(loopNoise);}
loopNoise();

/* ------------------ Paragraph decryption ------------------ */
const paragraph = document.getElementById("paragraphContainer");
const decryptedEl = document.getElementById("decryptedText");
const textContent = decryptedEl.innerText.trim();
decryptedEl.innerHTML = "";
const chars = [];
for (let c of textContent) {
  const span = document.createElement("span");
  span.className = "decrypted-char";
  span.textContent = c===" " ? "\u00A0" : c;
  decryptedEl.appendChild(span);
  chars.push(span);
}

let decryptionInterval;
function startDecryptionLoop() {
  if(decryptionInterval) return;
  decryptionInterval = setInterval(() => {
    chars.forEach((ch,i)=>{
      if(Math.random()<0.2) ch.textContent = textContent[i]===" "? "\u00A0": textContent[i];
      else ch.textContent = String.fromCharCode(33 + Math.floor(Math.random()*94));
    });
  },50);
}

/* ------------------ Scroll animation for paragraph ------------------ */
const paraAppearStart = disappearEnd + 50; // just after reincarnated text disappears
const paraAppearEnd = paraAppearStart + 300;
const paraDisappearStart = paraAppearEnd + 900;
const paraDisappearEnd = paraDisappearStart + 300;
const paraMoveDistance = 40;

window.addEventListener("scroll", ()=>{
  const scrollY = window.scrollY;
  if(scrollY < paraAppearStart){
    paragraph.style.opacity = 0;
    paragraph.style.transform = `translate(-50%, ${paraMoveDistance}px)`;
  } else if(scrollY >= paraAppearStart && scrollY <= paraAppearEnd){
    const progress = (scrollY-paraAppearStart)/(paraAppearEnd-paraAppearStart);
    paragraph.style.opacity = progress;
    paragraph.style.transform = `translate(-50%, ${paraMoveDistance*(1-progress)}px)`;
    if(!paragraph.dataset.activated){
      paragraph.dataset.activated = "true";
      startDecryptionLoop();
    }
  } else if(scrollY > paraAppearEnd && scrollY < paraDisappearStart){
    paragraph.style.opacity = 1;
    paragraph.style.transform = "translate(-50%,0)";
  } else if(scrollY >= paraDisappearStart && scrollY <= paraDisappearEnd){
    const progress = 1-(scrollY-paraDisappearStart)/(paraDisappearEnd-paraDisappearStart);
    paragraph.style.opacity = progress;
    paragraph.style.transform = `translate(-50%, ${-paraMoveDistance*(1-progress)}px)`;
  } else{
    paragraph.style.opacity = 0;
    paragraph.style.transform = `translate(-50%, ${-paraMoveDistance}px)`;
  }
});
</script>
</body>
</html>
